!function(){"use strict";class e{constructor({name:e,link:t},n,r){this._name=e,this._link=t,this._cardSelector=n,this._handlePreviewPicture=r}_setEventListeners(){this._cardElement.querySelector(".card__image").addEventListener("click",()=>{this._handlePreviewPicture(this._link,this._name)}),this._cardElement.querySelector(".card__like-button").addEventListener("click",()=>{this._handleLikeIcon()}),this._cardElement.querySelector(".card__delete-button").addEventListener("click",()=>{this._handleDeleteCard()})}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e,t){const n=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),n.textContent=e.validationMessage,n.classList.add(this._errorClass)}_hideInputError(e,t){const n=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),n.textContent="",n.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e,e.validationMessage):this._showInputError(e,e.validationMessage)}_toggleButtonState(){let e=this._inputEls.some(e=>!e.validity.valid),t=this._inputEls.every(e=>""===e.value.trim());e||t?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputEls.forEach(e=>{e.addEventListener("input",()=>{this._checkInputValidity(e),this._toggleButtonState()})})}enableValidation(){this._form.addEventListener("submit",e=>{e.preventDefault()}),this._setEventListeners(this._form)}};new e({name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},"#card-template").getView(),document.querySelector("#card-template").content.querySelector(".card");const n=document.querySelector(".cards__list"),r=document.querySelector("#edit-modal"),i=document.querySelector("#card-add-modal"),o=r.querySelector(".modal__form"),s=i.querySelector(".modal__form"),a=(document.getElementById("image-caption"),document.querySelector(".profile__edit-button")),l=r.querySelector(".modal__close"),c=i.querySelector(".modal__close"),u=document.querySelector(".profile__title"),d=document.querySelector(".profile__description"),_=document.querySelector(".profile__add-button"),m=o.querySelector(".modal__input_type_title"),h=o.querySelector(".modal__input_type_description"),p=s.querySelector(".modal__input_type_title"),v=s.querySelector(".modal__input_type_link"),y=document.querySelector("#preview-image-modal"),S=y.querySelector(".modal__image"),E=y.querySelector(".modal__close"),g=document.querySelector("#image-caption"),f={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},k=new t(f,o),q=new t(f,s);function w(e){e.classList.remove("modal_open"),document.removeEventListener("keydown",C)}function L(e){e.classList.add("modal_open"),document.addEventListener("keydown",C)}function b(e){e.target.classList.contains("modal")&&w(e.target)}function C(e){if("Escape"===e.key){const e=document.querySelector(".modal_open");e&&w(e)}}function B(t,n){const r=new e(t,"#card-template",j).getView();n.prepend(r)}function j(e,t){console.log(t),S.src=e,S.alt=t,g.textContent=t,L(y)}k.enableValidation(),q.enableValidation(),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",b)}),o.addEventListener("submit",function(e){e.preventDefault(),u.textContent=m.value,d.textContent=h.value,w(r)}),s.addEventListener("submit",function(e){e.preventDefault(),B({name:p.value,link:v.value},n),w(i),s.reset()}),a.addEventListener("click",()=>{m.value=u.textContent,h.value=d.textContent,L(r)}),l.addEventListener("click",()=>w(r)),_.addEventListener("click",()=>L(i)),c.addEventListener("click",()=>w(i)),E.addEventListener("click",()=>w(y)),[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}].forEach(e=>B(e,n))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUMsUUFBUzhCLElBQzNDQSxFQUFNakYsaUJBQWlCLFFBQVNxRixLQWtDbEMzQixFQUFtQjFELGlCQUFpQixTQXpCcEMsU0FBaUNtRyxHQUMvQkEsRUFBSTdDLGlCQUNKVSxFQUFhaEQsWUFBY21ELEVBQVVyQixNQUNyQ21CLEVBQW1CakQsWUFBY29ELEVBQWlCdEIsTUFDbERrQyxFQUFXeEIsRUFDYixHQXFCQUcsRUFBbUIzRCxpQkFBaUIsU0FuQnBDLFNBQWlDbUcsR0FDL0JBLEVBQUk3QyxpQkFHSnFDLEVBQVcsQ0FBRXZHLEtBRkFpRixFQUFldkIsTUFFVHpELEtBRE5pRixFQUFheEIsT0FDQ1MsR0FDM0J5QixFQUFXdkIsR0FDWEUsRUFBbUJ5QyxPQUNyQixHQWNBeEMsRUFBa0I1RCxpQkFBaUIsUUFBUyxLQUMxQ21FLEVBQVVyQixNQUFRa0IsRUFBYWhELFlBQy9Cb0QsRUFBaUJ0QixNQUFRbUIsRUFBbUJqRCxZQUM1Q29FLEVBQVU1QixLQUdaTSxFQUF3QjlELGlCQUFpQixRQUFTLElBQ2hEZ0YsRUFBV3hCLElBR2JVLEVBQWlCbEUsaUJBQWlCLFFBQVMsSUFBTW9GLEVBQVUzQixJQUMzRE0sRUFBd0IvRCxpQkFBaUIsUUFBUyxJQUNoRGdGLEVBQVd2QixJQUdiZ0IsRUFBc0J6RSxpQkFBaUIsUUFBUyxJQUM5Q2dGLEVBQVdULElBNUtRLENBQ25CLENBQ0VuRixLQUFNLGtCQUNOQyxLQUFNLHNHQUVSLENBQ0VELEtBQU0sY0FDTkMsS0FBTSx5R0FFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLDRHQUVSLENBQ0VELEtBQU0sVUFDTkMsS0FBTSxxR0FFUixDQUNFRCxLQUFNLHdCQUNOQyxLQUFNLHFHQUVSLENBQ0VELEtBQU0saUJBQ05DLEtBQU0sbUdBd0pHOEQsUUFBU3lDLEdBQWFELEVBQVdDLEVBQVVyQyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9Db21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9Db21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVQcmV2aWV3UGljdHVyZSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZVByZXZpZXdQaWN0dXJlID0gaGFuZGxlUHJldmlld1BpY3R1cmU7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVQcmV2aWV3UGljdHVyZSh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5faGFuZGxlRGVsZXRlQ2FyZCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gX2hhbmRsZVByZXZpZXdQaWN0dXJlKCkge1xyXG4gIC8vICAgdGhpcy5fcHJldmlld0ltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbiAgLy8gICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIC8vICAgICBcIiNwcmV2aWV3LWltYWdlLW1vZGFsX19pbWFnZVwiXHJcbiAgLy8gICApO1xyXG4gIC8vICAgdGhpcy5faW1hZ2VDYXB0aW9uID1cclxuICAvLyAgICAgdGhpcy5fcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1jYXB0aW9uXCIpO1xyXG4gIC8vICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgLy8gICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAvLyAgIHRoaXMuX2ltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gIC8vICAgdGhpcy5fb3Blbk1vZGFsKHRoaXMuX3ByZXZpZXdJbWFnZU1vZGFsKTtcclxuICAvLyB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAvL2dldCBjYXJkIHZpZXcsIHNldCBldmVudCBsaXN0ZW5lcnMsIGFuZCByZXR1cm4gdGhlIGNhcmQgZWxlbWVudFxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5nLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvckNsYXNzKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvckNsYXNzKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBsZXQgZm91bmRJbnZhbGlkID0gdGhpcy5faW5wdXRFbHMuc29tZShcclxuICAgICAgKGlucHV0RWwpID0+ICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gICAgbGV0IGFsbEVtcHR5ID0gdGhpcy5faW5wdXRFbHMuZXZlcnkoXHJcbiAgICAgIChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbHVlLnRyaW0oKSA9PT0gXCJcIlxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoZm91bmRJbnZhbGlkIHx8IGFsbEVtcHR5KSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gY29uc3QgeyB0aGlzLl9pbnB1dFNlbGVjdG9yLCB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciB9ID0gb3B0aW9ucztcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vQ29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9Db21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCBjYXJkRGF0YSA9IHtcclxuICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxufTtcclxuXHJcbmNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiKTtcclxuY2FyZC5nZXRWaWV3KCk7XHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcclxuICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XHJcblxyXG4vLyBXcmFwcGVyc1xyXG5jb25zdCBjYXJkc1dyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBpbWFnZUNhcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlLWNhcHRpb25cIik7XHJcblxyXG4vLyBCdXR0b25zIGFuZCBvdGhlciBET00gbm9kZXNcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbmNvbnN0IGFkZENhcmRNb2RhbENsb3NlQnV0dG9uID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLy8gRm9ybSBkYXRhXHJcbmNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCIpO1xyXG5jb25zdCBkZXNjcmlwdGlvbklucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5jb25zdCBjYXJkVGl0bGVJbnB1dCA9IGFkZENhcmRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCJcclxuKTtcclxuY29uc3QgY2FyZFVybElucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfbGlua1wiXHJcbik7XHJcblxyXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbmNvbnN0IGltYWdlQ2xvc2VNb2RhbEJ1dHRvbiA9IHByZXZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1jYXB0aW9uXCIpO1xyXG5cclxuY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmVcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUZvcm1FbGVtZW50XHJcbik7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgYWRkQ2FyZEZvcm1FbGVtZW50XHJcbik7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0tleSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuXCIpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0tleSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU92ZXJsYXlDbGljayhldmVudCkge1xyXG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgIGNsb3NlTW9kYWwoZXZlbnQudGFyZ2V0KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVzY0tleShldmVudCkge1xyXG4gIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGNvbnN0IG9wZW5lZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuXCIpO1xyXG4gICAgaWYgKG9wZW5lZE1vZGFsKSB7XHJcbiAgICAgIGNsb3NlTW9kYWwob3BlbmVkTW9kYWwpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKS5mb3JFYWNoKChtb2RhbCkgPT4ge1xyXG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVPdmVybGF5Q2xpY2spO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEsIHdyYXBwZXIpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlUHJldmlld01vZGFsKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0VmlldygpO1xyXG4gIHdyYXBwZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbklucHV0LnZhbHVlO1xyXG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IG5hbWUgPSBjYXJkVGl0bGVJbnB1dC52YWx1ZTtcclxuICBjb25zdCBsaW5rID0gY2FyZFVybElucHV0LnZhbHVlO1xyXG4gIHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0sIGNhcmRzV3JhcCk7XHJcbiAgY2xvc2VNb2RhbChhZGRDYXJkTW9kYWwpO1xyXG4gIGFkZENhcmRGb3JtRWxlbWVudC5yZXNldCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcmV2aWV3TW9kYWwobGluaywgbmFtZSkge1xyXG4gIGNvbnNvbGUubG9nKG5hbWUpO1xyXG4gIHByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG4gIHByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xyXG4gIHByZXZpZXdNb2RhbENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIG9wZW5Nb2RhbChwcmV2aWV3SW1hZ2VNb2RhbCk7XHJcbn1cclxuXHJcbi8vIEZvcm0gbGlzdGVuZXJzXHJcbnByb2ZpbGVGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuYWRkQ2FyZEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQpO1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQ7XHJcbiAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKVxyXG4pO1xyXG5cclxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gb3Blbk1vZGFsKGFkZENhcmRNb2RhbCkpO1xyXG5hZGRDYXJkTW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICBjbG9zZU1vZGFsKGFkZENhcmRNb2RhbClcclxuKTtcclxuXHJcbmltYWdlQ2xvc2VNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICBjbG9zZU1vZGFsKHByZXZpZXdJbWFnZU1vZGFsKVxyXG4pO1xyXG5cclxuaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmREYXRhKSA9PiByZW5kZXJDYXJkKGNhcmREYXRhLCBjYXJkc1dyYXApKTtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJsaW5rIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlUHJldmlld1BpY3R1cmUiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlUHJldmlld1BpY3R1cmUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwicmVtb3ZlIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXRWaWV3IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJzZXR0aW5nIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvdW5kSW52YWxpZCIsIl9pbnB1dEVscyIsInNvbWUiLCJhbGxFbXB0eSIsImV2ZXJ5IiwidmFsdWUiLCJ0cmltIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2FyZHNXcmFwIiwiZWRpdFByb2ZpbGVNb2RhbCIsImFkZENhcmRNb2RhbCIsInByb2ZpbGVGb3JtRWxlbWVudCIsImFkZENhcmRGb3JtRWxlbWVudCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiIsImFkZENhcmRNb2RhbENsb3NlQnV0dG9uIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsIm5hbWVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjYXJkVGl0bGVJbnB1dCIsImNhcmRVcmxJbnB1dCIsInByZXZpZXdJbWFnZU1vZGFsIiwicHJldmlld0ltYWdlIiwiaW1hZ2VDbG9zZU1vZGFsQnV0dG9uIiwicHJldmlld01vZGFsQ2FwdGlvbiIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJjbG9zZU1vZGFsIiwibW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlRXNjS2V5Iiwib3Blbk1vZGFsIiwiaGFuZGxlT3ZlcmxheUNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImtleSIsIm9wZW5lZE1vZGFsIiwicmVuZGVyQ2FyZCIsImNhcmREYXRhIiwid3JhcHBlciIsImNhcmRFbGVtZW50IiwiaGFuZGxlUHJldmlld01vZGFsIiwicHJlcGVuZCIsImNvbnNvbGUiLCJsb2ciLCJldnQiLCJyZXNldCJdLCJzb3VyY2VSb290IjoiIn0=